!function(){function e(e){return e&&e.__esModule?e.default:e}function t(e,t,r,a){Object.defineProperty(e,t,{get:r,set:a,enumerable:!0,configurable:!0})}var r=("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).parcelRequire4593,a=r.register;a("iV7jz",function(a,s){t(a.exports,"SearchBar",function(){return c});var o=r("c11m0"),n=r("g46YX"),i=r("7UnpA"),h=r("bkRoc");class c extends HTMLElement{get searchInput(){return this.shadowRoot.getElementById("PFsearchBox")}get searchButton(){return this.shadowRoot.getElementById("PFsubmitSearch")}get clearButton(){return this.shadowRoot.getElementById("PFclearSearch")}get searchSuggestContainer(){return this.shadowRoot.getElementById("PFsearchSuggest")}get searchForm(){return this.shadowRoot.getElementById("PFsearchForm")}get selectContainer(){return this.shadowRoot.getElementById("selectContainer")}get recentSearchsText(){return this.shadowRoot.getElementById("recentSearches")}get value(){return this.searchInput.value.trim()}set value(e){this.searchInput.value=e}get hasRecentSearchText(){return"true"===this.getAttribute("data-hasrecentsearchtext")}set hasRecentSearchText(e){e?this.setAttribute("data-hasrecentsearchtext",e):this.removeAttribute("data-hasrecentsearchtext")}setData({searchPlaceholderText:e="",searchButtonText:t="",searchEndpoint:r="/search",searchQueryParam:a="query",searchOptionalParams:s=[],searchIconHidden:o=!1,searchPath:i="https://www.churchofjesuschrist.org",searchFilters:h=[],recentSearches:c=""}={}){o?this.classList.add("hidden"):this.classList.remove("hidden");const l=e||t;c&&(this.hasRecentSearchText="true"),this.recentSearchsText.innerText=c,this.searchInput.setAttribute("placeholder",l),this.searchInput.setAttribute("name",a),this.searchButton.setAttribute("aria-label",l);const d=this.shadowRoot.querySelector("label");d&&(d.innerHTML=l),this.searchForm.setAttribute("action",`${i}${r}`),this.shadowRoot.querySelector('input[name="lang"]').value=window.Platform.lang,this.searchForm.querySelectorAll("input[data-custom]").forEach(e=>e.remove()),s.forEach(({param:e="",value:t=""}={})=>{if(e){const r=document.createElement("input");r.type="hidden",r.name=e,r.value=t,r.setAttribute("data-custom",""),this.searchForm.appendChild(r)}}),this.handleSearchFilters(h),document.addEventListener("checkcontext",()=>this.handleSearchFilters(h));!this.searchButton.hasChildNodes()&&this.searchButton.insertAdjacentHTML("afterbegin",`${n.search} <span id="searchText">${t}</span>`)}handleSearchFilters(e){var t,r,a;const s=this.selectContainer.querySelector("select"),o=this.selectContainer.querySelector("label");s&&s.remove(),o&&o.remove();const[n]=(null===(a=window)||void 0===a||null===(r=a.platformConfig)||void 0===r||null===(t=r.searchConfig)||void 0===t?void 0:t.searchOptionalParams)||[];if(null==e?void 0:e.length){const t=`<label class="visuallyHidden" for="filterSearch">Filter Search</label>\n      <select id="filterSearch" name="facet">\n        ${e.map(({name:e="",value:t=""})=>{let r="";return"facet"===(null==n?void 0:n.param)&&(null==n?void 0:n.value)===t&&(r="selected"),`<option value="${t}" ${r}>${e}</option>`}).join("")}\n      </select>\n      `;this.selectContainer.insertAdjacentHTML("afterbegin",t)}}getSearchSuggestions(){if(this.abortController.abort(),this.abortController=new AbortController,!this.value)return this.clearSearchSuggestions();this.hasRecentSearchText&&this.hideRecentSearchsText();const e=this.value;fetch(`${window.Platform.isPreview?"https://header-footer-preview.aws.churchofjesuschrist.org":"https://www.churchofjesuschrist.org"}/search/proxy/vertex-suggest?q=${encodeURIComponent(e)}`,{signal:this.abortController.signal}).then(e=>e.json()).then(t=>{const{querySuggestions:r=[]}=t[0];this.searchSuggestContainer.innerHTML=r.map(({suggestion:t=""},r)=>`<li id="searchSuggest-${r}" role="option" aria-selected="false" tabindex="-1">${t.replace(new RegExp(e,"gi"),"<strong>$&</strong>")}</li>`).join(""),this.searchInput.setAttribute("aria-expanded","true")}).catch(()=>{})}clearSearchSuggestions(){this.searchSuggestContainer.innerHTML="",this.searchInput.setAttribute("aria-expanded","false")}hideRecentSearchsText(){this.recentSearchsText.classList.replace("displayFlex","displayNone"),this.searchSuggestContainer.classList.remove("paddingTop32"),this.searchSuggestContainer.classList.add("topZero")}showRecentSearchsText(){this.searchSuggestContainer.classList.add("paddingTop32"),this.searchSuggestContainer.classList.remove("topZero"),this.recentSearchsText.classList.replace("displayNone","displayFlex")}connectedCallback(){var e,t;const r=!0===(null===(t=window.platformConfig)||void 0===t||null===(e=t.cucConfig)||void 0===e?void 0:e.friendNav),a=r?"friend-header":"platform-header",s=document.querySelector(a),o=s.shadowRoot;this.searchForm.addEventListener("focusin",()=>{const e=!s.getAttribute("data-mobilesearch"),t=o.querySelector("#mainMenus"),r=o.querySelector("global-profile-nav"),a=o.querySelector("search-bar");e&&(null==t||t.setAttribute("data-searchfocus","true"),null==r||r.setAttribute("data-searchfocus","true"),a.setAttribute("data-searchfocus","true"),s.setAttribute("data-searchfocus","true"));const n=JSON.parse(localStorage.getItem("searchHistory"));(null==n?void 0:n.length)&&!this.searchSuggestContainer.hasChildNodes()&&(this.hasRecentSearchText?this.showRecentSearchsText():this.searchSuggestContainer.classList.add("topZero"),n.map((e,t)=>{const r=document.createElement("li");r.role="option",r.id=`searchSuggest-${t}`,r.ariaSelected="false",r.tabIndex="-1",r.innerText=e,this.searchSuggestContainer.appendChild(r)}),this.searchInput.setAttribute("aria-expanded","true"))}),document.addEventListener("closeSearch",()=>{const e=o.querySelector("#mainMenus"),t=o.querySelector("global-profile-nav"),a=o.querySelector("search-bar");if(null==e||e.removeAttribute("data-searchfocus"),null==t||t.removeAttribute("data-searchfocus"),a.removeAttribute("data-searchfocus"),s.removeAttribute("data-searchfocus"),r){const e=o.querySelector("#searchBarContainer"),t=o.querySelector("#searchButton"),r=o.querySelector("#closeButton");e.classList.replace("openMobileSearch","closeMobileSearch"),r.classList.replace("flex","displayNone"),t.classList.replace("displayNone","flex")}}),this.addEventListener("focus",()=>{(0,h.default)(this)}),this.clearButton.addEventListener("click",()=>{this.hasRecentSearchText&&this.hideRecentSearchsText();const e=this.shadowRoot.querySelector("#filterSearch");e?e.focus():this.shadowRoot.querySelector("#PFsearchBox").focus(),this.clearSearchSuggestions()}),this.searchForm.addEventListener("focusout",e=>{this.searchForm.matches(":focus-within")||this.searchForm.contains(e.relatedTarget)||(this.hasRecentSearchText&&this.hideRecentSearchsText(),document.dispatchEvent(new CustomEvent("closeSearch")),this.searchInput.setAttribute("aria-expanded","false"),setTimeout(()=>{this.clearSearchSuggestions(),this.value=""},500))}),this.searchInput.addEventListener("input",(0,i.debounce)(this.getSearchSuggestions.bind(this),250));const n=e=>{this.searchSuggestContainer.querySelectorAll('[aria-selected="true"]').forEach(e=>{e.setAttribute("aria-selected","false")}),null==e||e.setAttribute("aria-selected","true")};this.searchInput.addEventListener("keydown",e=>{switch(e.key){case"ArrowUp":this.searchSuggestContainer.lastElementChild&&(this.searchSuggestContainer.lastElementChild.focus(),this.value=this.searchSuggestContainer.lastElementChild.innerText,n(this.searchSuggestContainer.lastElementChild));break;case"ArrowDown":this.searchSuggestContainer.firstElementChild&&(this.searchSuggestContainer.firstElementChild.focus(),this.value=this.searchSuggestContainer.firstElementChild.innerText,n(this.searchSuggestContainer.firstElementChild));break;case"Escape":this.searchInput.blur(),e.stopPropagation();break;default:return}e.preventDefault()}),this.searchSuggestContainer.addEventListener("keydown",e=>{switch(e.key){case"ArrowUp":{const t=[...this.searchSuggestContainer.children].indexOf(e.target);if(0===t)this.searchInput.focus(),n();else{const e=this.searchSuggestContainer.children[t-1];e.focus(),this.value=e.innerText,n(e)}break}case"ArrowDown":{const t=[...this.searchSuggestContainer.children].indexOf(e.target);if(e.target===this.searchSuggestContainer.lastElementChild)this.searchInput.focus(),n();else{const e=this.searchSuggestContainer.children[t+1];e.focus(),this.value=e.innerText,n(e)}break}case"Escape":e.target.blur();break;case"Enter":case" ":this.searchForm.submit();break;default:return}e.preventDefault()}),this.searchSuggestContainer.addEventListener("click",e=>{"LI"===e.target.nodeName?(this.searchInput.value=e.target.innerText,this.searchForm.submit()):"STRONG"===e.target.nodeName&&(this.searchInput.value=e.target.parentElement.innerText,this.searchForm.submit())}),this.searchButton.addEventListener("click",e=>{""===this.value&&(e.preventDefault(),this.searchInput.focus())})}constructor(){super();this.attachShadow({mode:"open"}).innerHTML=`\n    <form id="PFsearchForm" method="GET">\n    <div style="display: flex; height: 100%;" id="selectContainer">\n    <span style="width: 100%;">\n      <input type="hidden" name="lang" />\n        <label class="visuallyHidden" for="PFsearchBox">Search</label>\n          <input\n            type="text"\n            autocomplete="off"\n            id="PFsearchBox"\n            form="PFsearchForm"\n            inputmode="search"\n            list="PFsearchSuggest"\n            role="combobox"\n            aria-autocomplete="list"\n            autocapitalize="none"\n            aria-owns="PFsearchSuggest"\n            aria-expanded="false"\n          />\n          <span id="clearSubmitContainer">\n            <button type="reset" id="PFclearSearch" aria-label="Clear">\n              ${n.close}\n            </button>\n            <button type="submit" id="PFsubmitSearch"></button>\n          </span>\n          <span id="recentSearches" class="displayNone"></span>\n          <ul role="listbox" id="PFsearchSuggest"></ul>\n        </span>\n      </div>\n    </form>\n    <style>${e(o)}</style>\n    `,this.abortController=new AbortController}}window.customElements.define("search-bar",c)}),a("c11m0",function(e,t){e.exports=":host{height:var(--headerHeight);flex-grow:1;justify-content:center;align-items:center;display:flex}:host([mobile]){max-height:52px}:host([mobile]) #PFsearchForm{width:100%;height:48px}:host([mobile]) #PFsubmitSearch{top:4px;right:4px}:host([mobile]) #PFclearSearch{top:4px;right:48px}:host([mobile]) #PFsearchBox{font-size:var(--headerFontSize16);padding-right:90px}:host([mobile]) button{width:40px;height:40px}select{border:none;width:0}#PFsearchForm{width:250px;height:34px;margin:0;position:relative}#PFsearchBox{background:var(--darkModeOne,var(--searchThemeBackgroundOne,var(--white)));border:1px solid var(--grey20);box-sizing:border-box;color:var(--darkModeWhite,var(--searchThemeText,var(--text120)));font-family:var(--sans);height:100%;padding:2px 64px 2px var(--headerSpacing8);border-radius:2px;outline-width:1px;width:100%}#PFsearchBox::-ms-input-placeholder{transition:color .1s ease-in-out}#PFsearchBox::placeholder{transition:color .1s ease-in-out}#PFsearchBox[aria-expanded=true]~#PFsearchSuggest:not(:empty),button{display:flex}button{color:var(--darkModeOne,var(--white));cursor:pointer;font-family:var(--sans);font-size:var(--headerFontSize14);font-weight:var(--fontWeightNormal);align-items:center;gap:var(--headerSpacing8);height:28px;padding:var(--headerSpacing8);background:0 0;border:none;border-radius:2px;justify-content:center;transition:background-color 50ms ease-in-out}button svg{fill:var(--darkModeWhite,var(--searchThemeText,var(--text120)));transition:fill 50ms ease-in-out;width:16px!important;height:16px!important}button:focus,button:hover{background-color:var(--darkModeTwo,var(--searchThemeFocusTwo,var(--grey3)))}#PFsearchBox:placeholder-shown~#clearSubmitContainer #PFclearSearch{display:none}#clearSubmitContainer{display:flex;position:absolute;top:3px;right:3px}#recentSearches{color:var(--darkModeWhite,var(--searchThemeText,var(--text120)));font-family:var(--sans);font-size:var(--headerFontSize13);font-weight:var(--fontWeightSemiBold);line-height:var(--lineHeightLoose);padding-left:var(--headerSpacing16);top:var(--headerSpacing8);z-index:102;position:relative}#PFsearchSuggest{background:var(--darkModeOne,var(--searchThemeBackgroundOne,var(--white)));box-shadow:var(--boxShadowRaised);box-sizing:border-box;opacity:.97;z-index:101;border-radius:2px;flex-direction:column;width:100%;margin:0;padding:16px 8px;display:none;position:relative;top:-21px;left:0}#PFsearchSuggest li{color:var(--darkModeWhite,var(--searchThemeText,var(--text120)));cursor:pointer;font-family:var(--sans);font-size:var(--headerFontSize13);font-weight:var(--fontWeightNormal);line-height:var(--lineHeightLoose);padding:2px 8px;list-style-type:none}#PFsearchSuggest li:focus,#PFsearchSuggest li:hover{background-color:var(--darkModeTwo,var(--searchThemeFocusTwo,var(--grey3)))}#PFsearchSuggest li strong{font-weight:var(--fontWeightSemiBold)}.paddingTop32{padding-top:32px!important}#PFsearchForm:focus-within{width:309px}#PFsearchForm:focus-within #PFsearchBox:focus::-ms-input-placeholder{color:transparent}#PFsearchForm:focus-within #PFsearchBox:focus::placeholder{color:transparent}#PFsearchForm:focus-within #PFsubmitSearch{background-color:var(--darkModeBlue,var(--theme-page-header-nav-bg,var(--blue25)))}#PFsearchForm:focus-within #PFsubmitSearch:focus{background-color:var(--darkModeBlue,var(--theme-page-header-nav-bg,var(--blue30)))}#PFsearchForm:focus-within #PFsubmitSearch:hover{background-color:var(--darkModeBlue,var(--theme-page-header-nav-bg,var(--blue30)))}#PFsearchForm:focus-within #PFsubmitSearch svg{fill:var(--darkModeOne,var(--white))}#PFsearchForm:focus-within #PFsearchSuggest:not(:empty){display:flex}.visuallyHidden{clip:rect(0 0 0 0);border:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}:host([rtl=true]) #PFsubmitSearch{left:3px;right:unset}:host([rtl=true]) #PFclearSearch{left:34px;right:unset}:host([rtl=true]) #PFsearchBox{padding-left:64px;padding-right:12px}:host([rtl=true]) #clearSubmitContainer{left:3px;right:unset}:host([data-searchoverlay=true]){z-index:103;justify-content:center;align-items:center;width:100%;position:fixed;left:0;display:flex!important}:host([data-searchoverlay=true]) #PFsearchForm{margin:0 var(--headerSpacing16);width:100%;max-width:475px}#searchText{display:none}:host([data-searchfocus=true]) select{background:var(--darkModeTwo,var(--searchThemeBackgroundTwo,unset));border:1px solid var(--grey20);color:var(--darkModeWhite,var(--searchThemeText,var(--text120)));padding-left:var(--headerSpacing8);width:unset;display:flex}:host([data-searchfocus=true]) #PFsearchForm{width:650px}:host([data-searchfocus=true]) #searchText{display:flex}:host([data-searchfocus=true]) #PFsubmitSearch{background-color:var(--darkModeBlue,var(--theme-page-header-nav-bg,var(--blue30)))}:host([data-searchfocus=true]) #PFsubmitSearch svg{fill:var(--white)}:host([data-mobilesearch=true]) select{display:none}:host([data-mobilesearch=true]) #PFsearchForm{width:100%;max-width:309px}:host([data-mobilesearch=true]) #searchText{display:none}:host(.hidden){display:none}.displayNone{display:none!important}.displayFlex{display:flex}.topZero{top:0!important}"}),a("bkRoc",function(e,r){function a(e){document.dispatchEvent(new CustomEvent("closemenus",{composed:!0,detail:{opened:e}}))}t(e.exports,"default",function(){return a})})}();